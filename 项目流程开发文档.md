# 天气预报APP开发流程说明文档

> ## 1.1项目来源
>
> > 本学期Android课程要求

> ## 1. 2 开发目标
>
> > ​	随着3G技术和移动互联网技术的飞速发展，智能手机的功能不断增加，使得基于Android平台的查询需求越来越多。
> >
> > ​	该软件是利用现有网络快速获取网络上的天气信息，并将其显示在移动终端上，为用户提供实时的天气查询和近期的天气查询服务，为工作、旅行等带来方便。通过Web、服务和其他技术，用户可以体验前所未有的移动计算。
>
> ## 2.1 项目总体设计
>
> > ​	本软件是一个APP Widget 应用程序，启动程序后可以进行城市的设置，可以通过图片和文字显示当前和未来的天气状况，包括温度、湿度、风向、雨雪情况等。这些天气数据是通过后天服务获取的，这个后台服务可以按照一定的时间间隔，通过公开的天气预报查询API获取天气预报信息。
> >
> > ​	该软件的基本功能需求有：
> >
> >  - 启动应用程序
> >  - 设置界面：对要显示天气预报的城市进行设置
> >  - 显示界面：通过文字和图片显示当前的天气情况，包括日期、时间、最低温度、最高温度、城市、当前温度
> >  - 详细界面：先显示出显示界面上所有信息的同时用view Page形式显示今后四天的天气情况
>
> ##  2.2 开发环境
>
> >​	Android的上层应用程序是用Java语言开发的，一般情况下是基于Dalvik虚拟机的，所以Google公司推荐使用主流的Java集成开发环境Eclipse。而用Java语言进行开发，需要用到SUN公司提供的Java SDK(其中包括JRE：Java Runtime Environment)。此外，Android的应用程序开发和Java开发有较大区别的，需要使用Google提供的Android SDK。同时，要在Eclipse上安装ADT，为Android开发提供开发工具的升级或者变更，是Eclipse下开发工具的升级或下载的工具。
> >
> >​	简言之，需要一下软件，才能搭建Android开发环境，从而进行Android应用程序的开发。
> >
> >(1)  Java JDK
> >
> >(2)  Android Studio
> >
> >(3)  Android SDK
> >
> >(4)  ADT
>
> ## 2.3 数据库设计
>
> > ​	本软件中目前仅有一部分数据需要存储，一个是中国所有城市的一些属性，例如：城市ID，城市名，英文名等。由于数据量不是很大，因此可以选择SQLite数据库作为存储数据的方法，建立数据库city.db，并且建立表city 来存储城市数据
>
> ## 2.4 功能模块设计
>
> > ​	从功能需求上分析可以看出，整个应用程序应划分为4个模块，分别是程序启动、用户界面、后台服务和数据库适配器，各模块之间的关系如图所示。
> >
> > ![功能模块](https://raw.githubusercontent.com/IceFrost925/Android/master/%E5%8A%9F%E8%83%BD%E6%A8%A1%E5%9D%97.jpg)
>
> ## 3.1系统主要功能
>
> > 本软件要完成在android手机上实现天气的即时预报。所涉及的功能有： 
> >
> > 1. 启动程序后可以进行城市的设置； 
> > 2. 可以通过图片和文字显示当前和未来的天气状况，包括温度、湿度、风向和雨雪情况等。使用效果图实现与相应天气的结合。 
> > 3. 这些天气数据是通过后台服务获取的，这个后台服务可以按照一定的时间间隔，通过心知天气的公共接口获取天气预报信息，并将天气信息呈现在显示界面中。
>
> ## 3.2 用户界面

> > ###  3.2.1主页面的页面设计
> >
> > 1. 顶部工具栏制作
> >    * 制作的界面如上图所示，可以分为四部分工具栏、今日天气信息、一周天气信息，其他。 
> >    * 顶部工具栏包含选择城市、分隔符、天气名称、定位、刷新等控件。
> > 2. 制作今日天气界面
> >    * 界面中的数据采用调心知天气的公共接口获取该城市的天气信息
> >    * 在底部采用view Page同时显示昨日和未来五天的天气情况
> > 3. 效果图
>

> ![weather](https://raw.githubusercontent.com/IceFrost925/Android/master/weather.png)
>
> >
>
> > ### 3.2.2 城市选择界面
>
> > 1. 通过点击首页顶部的工具栏跳转到定位城市的界面
> > 2. 通过该页面的搜索框可以快速某一城市，点击某一城市后将该城市的数据传递首页
> > 3. 该页面采用 list View的形式展示数据
> > 4. 页面的数据是从该手机的SQLite数据库读取
> >
> > ![city](https://raw.githubusercontent.com/IceFrost925/Android/master/city.png)![city](https://raw.githubusercontent.com/IceFrost925/Android/master/city_result.png)
>
> > ### 3.2.3 发送网络请求，获取天气预报数据
> >
> > 1. 采用了网络请求框架OKHTTP3 —— 一个处理网络请求的开源项目,是安卓端最火热的轻量级框架,由移动支付[Square](https://baike.baidu.com/item/Square/65870)公司贡献
> > 2. 调用和风天气API天气预报接口，获取天气信息并动态展示在首页view Page
> > 3. 采用GSON——Google提供的用来在Java对象和JSON数据之间进行映射的Java类库，来格式化所需数据
> >
> > ### 3.3最终实时界面展示
> >
> > ![weather_dynamic](https://raw.githubusercontent.com/IceFrost925/Android/master/weather_dynamic.png)
> >
> >

> ## 4. 项目总结
>
> 为期两月的Android课程已经结束，在这两周中我学习了很多，也得到了很多。通过天气预报APP的开发把理论与实际结合，通过对理论知识的理解，领悟从而运用到生活实际巩固所学的知识，提高对实际生活的认识，积累经验。在本次Android天气预报软件开发过程中，我通过课程学习和网上查询，其中对数据获取和解析做了分析，通过模拟器显示城市名片，实时天气情况 。在此基础上，基于Android平台设计和开发，实现对android编程的理解与应用，特别是在对于控件的应用和活动的创建有了很深的理解。

